
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Docker Swarm mode ideas and tools">
      
      
      
        <link rel="canonical" href="https://dockerswarm.khulnasoft.com/traefik/">
      
      
        <link rel="prev" href="../swarm-or-kubernetes/">
      
      
        <link rel="next" href="../swarmpit/">
      
      
      <link rel="icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.40">
    
    
      
        <title>Traefik Proxy with HTTPS - Docker Swarm KhulnaSoft</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/termynal.css">
    
      <link rel="stylesheet" href="../css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-DXZ6N63Y4N"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-DXZ6N63Y4N",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-DXZ6N63Y4N",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Traefik Proxy with HTTPS - Docker Swarm KhulnaSoft" >
      
        <meta  property="og:description"  content="Docker Swarm mode ideas and tools" >
      
        <meta  property="og:image"  content="https://dockerswarm.khulnasoft.com/assets/images/social/traefik.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://dockerswarm.khulnasoft.com/traefik/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Traefik Proxy with HTTPS - Docker Swarm KhulnaSoft" >
      
        <meta  name="twitter:description"  content="Docker Swarm mode ideas and tools" >
      
        <meta  name="twitter:image"  content="https://dockerswarm.khulnasoft.com/assets/images/social/traefik.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#traefik-proxy-with-https" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Docker Swarm KhulnaSoft" class="md-header__button md-logo" aria-label="Docker Swarm KhulnaSoft" data-md-component="logo">
      
  <img src="../img/icon-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Docker Swarm KhulnaSoft
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Traefik Proxy with HTTPS
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2C5.13 2 2 5.13 2 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.87-3.13-7-7-7M6 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H6zm13-8h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9zm-2.15 5.65L18 15l1.15 3.65z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="teal"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/khulnasoft/dockerswarm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    khulnasoft/dockerswarm
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Docker Swarm KhulnaSoft" class="md-nav__button md-logo" aria-label="Docker Swarm KhulnaSoft" data-md-component="logo">
      
  <img src="../img/icon-white.svg" alt="logo">

    </a>
    Docker Swarm KhulnaSoft
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/khulnasoft/dockerswarm" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    khulnasoft/dockerswarm
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker Swarm KhulnaSoft
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../swarm-or-kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker Swarm Mode or Kubernetes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Traefik Proxy with HTTPS
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Traefik Proxy with HTTPS
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#note-version-2-and-v3" class="md-nav__link">
    <span class="md-ellipsis">
      Note - version 2 (and v3)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intro" class="md-nav__link">
    <span class="md-ellipsis">
      Intro
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Intro">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-interface" class="md-nav__link">
    <span class="md-ellipsis">
      User Interface
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How it works
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-docker-compose-file" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Docker Compose file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-it" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy it
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-it" class="md-nav__link">
    <span class="md-ellipsis">
      Check it
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-the-user-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Check the user interface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-the-client-ip" class="md-nav__link">
    <span class="md-ellipsis">
      Getting the client IP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#distributed-lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      Distributed Let's Encrypt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What's next
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../swarmpit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Swarmpit web user interface for your Docker Swarm cluster
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../swarmprom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Swarmprom for real-time monitoring and alerts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../portainer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Portainer web user interface for your Docker Swarm cluster
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../thelounge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Lounge - self-hosted web IRC client
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../gitlab-ci/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitLab CI runner for CI/CD
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../traefik-v1/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Traefik v1
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Traefik v1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../traefik-v1/traefik/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Traefik Proxy with HTTPS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../traefik-v1/traefik-technical-details/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Traefik Proxy with HTTPS - Technical Details
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../traefik-v1/traefik-with-volume/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Traefik Proxy with HTTPS using volume
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../project-generators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Generators
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#note-version-2-and-v3" class="md-nav__link">
    <span class="md-ellipsis">
      Note - version 2 (and v3)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intro" class="md-nav__link">
    <span class="md-ellipsis">
      Intro
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Intro">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-interface" class="md-nav__link">
    <span class="md-ellipsis">
      User Interface
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How it works
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Preparation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-docker-compose-file" class="md-nav__link">
    <span class="md-ellipsis">
      Create the Docker Compose file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploy-it" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy it
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-it" class="md-nav__link">
    <span class="md-ellipsis">
      Check it
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#check-the-user-interface" class="md-nav__link">
    <span class="md-ellipsis">
      Check the user interface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-the-client-ip" class="md-nav__link">
    <span class="md-ellipsis">
      Getting the client IP
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#distributed-lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      Distributed Let's Encrypt
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What's next
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="traefik-proxy-with-https">Traefik Proxy with HTTPS<a class="headerlink" href="#traefik-proxy-with-https" title="Permanent link">&para;</a></h1>
<h2 id="note-version-2-and-v3">Note - version 2 (and v3)<a class="headerlink" href="#note-version-2-and-v3" title="Permanent link">&para;</a></h2>
<p>This guide is updated for Traefik version 2 and version 3. âœ¨</p>
<p>If you are looking for the previous guides for Traefik version 1, check them in <a href="https://dockerswarm.khulnasoft.com/traefik-v1/" class="external-link" target="_blank">DockerSwarm.rocks/traefik-v1/</a>.
Using Traefik 3 is only one line difference in the YAML used to deploy Traefik, and is detailed below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are many applications and some project generators based on the previous guides for Traefik version 1.</p>
<p>If you have something already deployed, there are chances it uses those previous guides.</p>
<p>But for new projects, continue here. ðŸš€</p>
</div>
<h2 id="intro">Intro<a class="headerlink" href="#intro" title="Permanent link">&para;</a></h2>
<p>So, you have a <strong>Docker Swarm mode</strong> cluster set up as described in <a href="https://dockerswarm.khulnasoft.com" target="_blank">DockerSwarm.rocks</a>.</p>
<p>Now you can add a main <a href="https://traefik.io/" target="_blank"><strong>Traefik</strong></a> load balancer/proxy to:</p>
<ul>
<li>Handle <strong>connections</strong>.</li>
<li><strong>Expose</strong> specific services and applications based on their domain names.</li>
<li>Handle <strong>multiple domains</strong> (if you need to). Similar to "virtual hosts".</li>
<li>Handle <strong>HTTPS</strong>.</li>
<li>Acquire (generate) <strong>HTTPS certificates automatically</strong> (including renewals) with <a href="https://letsencrypt.org/" target="_blank">Let's Encrypt</a>.</li>
<li>Add HTTP <strong>Basic Auth</strong> for any service that you need to protect and doesn't have its own security, etc.</li>
<li>Get all its configurations automatically from <strong>Docker labels</strong> set in your stacks (you don't need to update configuration files).</li>
</ul>
<p>These ideas, techniques, and tools would also apply to other cluster orchestrators, like Kubernetes or Mesos, to add a main load balancer with HTTPS support, certificate generation, etc. But this article is focused on Docker Swarm mode.</p>
<h3 id="user-interface">User Interface<a class="headerlink" href="#user-interface" title="Permanent link">&para;</a></h3>
<p>The guide includes how to expose the internal Traefik web UI dashboard through the same Traefik load balancer, using a secure HTTPS certificate and HTTP Basic Auth.</p>
<p><img src="https://dockerswarm.khulnasoft.com/img/traefik-screenshot.webp"></p>
<h2 id="how-it-works">How it works<a class="headerlink" href="#how-it-works" title="Permanent link">&para;</a></h2>
<p>The idea is to have a main load balancer/proxy that covers all the Docker Swarm cluster and handles HTTPS certificates and requests for each domain.</p>
<p>But doing it in a way that allows you to have other Traefik services inside each stack without interfering with each other, to redirect based on path in the same stack (e.g. one container handles <code>/</code> for a web frontend and another handles <code>/api</code> for an API under the same domain), or to redirect from HTTP to HTTPS selectively.</p>
<h2 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h2>
<ul>
<li>Connect via SSH to a manager node in your cluster (you might have only one node) that will have the Traefik service.</li>
<li>Create a network that will be shared with Traefik and the containers that should be accessible from the outside, with:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-0-1">docker<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>--driver<span class="o">=</span>overlay<span class="w"> </span>traefik-public
</span></code></pre></div>
<ul>
<li>Get the Swarm node ID of this node and store it in an environment variable:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-1-1"><span class="nb">export</span><span class="w"> </span><span class="nv">NODE_ID</span><span class="o">=</span><span class="k">$(</span>docker<span class="w"> </span>info<span class="w"> </span>-f<span class="w"> </span><span class="s1">&#39;{{.Swarm.NodeID}}&#39;</span><span class="k">)</span>
</span></code></pre></div>
<ul>
<li>Create a tag in this node, so that Traefik is always deployed to the same node and uses the same volume:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-2-1">docker<span class="w"> </span>node<span class="w"> </span>update<span class="w"> </span>--label-add<span class="w"> </span>traefik-public.traefik-public-certificates<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="nv">$NODE_ID</span>
</span></code></pre></div>
<ul>
<li>Create an environment variable with your email, to be used for the generation of Let's Encrypt certificates, e.g.:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-3-1"><span class="nb">export</span><span class="w"> </span><span class="nv">EMAIL</span><span class="o">=</span>admin@example.com
</span></code></pre></div>
<ul>
<li>Create an environment variable with the domain you want to use for the Traefik UI (user interface), e.g.:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-4-1"><span class="nb">export</span><span class="w"> </span><span class="nv">DOMAIN</span><span class="o">=</span>traefik.sys.example.com
</span></code></pre></div>
<ul>
<li>
<p>You will access the Traefik dashboard at this domain, e.g. <code>traefik.sys.example.com</code>. So, make sure that your DNS records point the domain to one of the IPs of the cluster. Better if it is the IP where the Traefik service runs (the manager node you are currently connected to).</p>
</li>
<li>
<p>Create an environment variable with a username (you will use it for the HTTP Basic Auth for Traefik and Consul UIs), for example:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-5-1"><span class="nb">export</span><span class="w"> </span><span class="nv">USERNAME</span><span class="o">=</span>admin
</span></code></pre></div>
<ul>
<li>Create an environment variable with the password, e.g.:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-6-1"><span class="nb">export</span><span class="w"> </span><span class="nv">PASSWORD</span><span class="o">=</span>changethis
</span></code></pre></div>
<ul>
<li>Use <code>openssl</code> to generate the "hashed" version of the password and store it in an environment variable:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-7-1"><span class="nb">export</span><span class="w"> </span><span class="nv">HASHED_PASSWORD</span><span class="o">=</span><span class="k">$(</span>openssl<span class="w"> </span>passwd<span class="w"> </span>-apr1<span class="w"> </span><span class="nv">$PASSWORD</span><span class="k">)</span>
</span></code></pre></div>
<p><strong>(Optional)</strong>: Alternatively, if you don't want to put the password in an environment variable, you could type it interactively, e.g.:</p>
<div class="highlight"><pre><span></span><code><span id="__span-8-1"><span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">HASHED_PASSWORD</span><span class="o">=</span><span class="k">$(</span>openssl<span class="w"> </span>passwd<span class="w"> </span>-apr1<span class="k">)</span>
</span><span id="__span-8-2"><span class="go">Password: $ enter your password here</span>
</span><span id="__span-8-3"><span class="go">Verifying - Password: $ re enter your password here</span>
</span></code></pre></div>
<ul>
<li>You can check the contents with:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-9-1"><span class="nb">echo</span><span class="w"> </span><span class="nv">$HASHED_PASSWORD</span>
</span></code></pre></div>
<p>It will look like:</p>
<div class="highlight"><pre><span></span><code><span id="__span-10-1">$apr1$89eqM5Ro$CxaFELthUKV21DpI3UTQO.
</span></code></pre></div>
<h2 id="create-the-docker-compose-file">Create the Docker Compose file<a class="headerlink" href="#create-the-docker-compose-file" title="Permanent link">&para;</a></h2>
<ul>
<li>Download the file <code>traefik.yml</code> for Traefik v2:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-11-1">curl<span class="w"> </span>-L<span class="w"> </span>dockerswarm.khulnasoft.com/traefik.yml<span class="w"> </span>-o<span class="w"> </span>traefik.yml
</span></code></pre></div>
<p>or <code>traefik-v3.yml</code> for Traefik 3</p>
<div class="highlight"><pre><span></span><code><span id="__span-12-1">curl<span class="w"> </span>-L<span class="w"> </span>dockerswarm.khulnasoft.com/traefik-v3.yml<span class="w"> </span>-o<span class="w"> </span>traefik.yml
</span></code></pre></div>
<ul>
<li>...or create it manually, for example, using <code>nano</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-13-1">nano<span class="w"> </span>traefik.yml
</span></code></pre></div>
<ul>
<li>And copy the contents inside:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-14-1"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.3&#39;</span>
</span><span id="__span-14-2">
</span><span id="__span-14-3"><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-14-4">
</span><span id="__span-14-5"><span class="w">  </span><span class="nt">traefik</span><span class="p">:</span>
</span><span id="__span-14-6"><span class="w">    </span><span class="c1"># Use the latest v2.2.x Traefik image available</span>
</span><span id="__span-14-7"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik:v2.2</span>
</span><span id="__span-14-8"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-14-9"><span class="w">      </span><span class="c1"># Listen on port 80, default for HTTP, necessary to redirect to HTTPS</span>
</span><span id="__span-14-10"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80:80</span>
</span><span id="__span-14-11"><span class="w">      </span><span class="c1"># Listen on port 443, default for HTTPS</span>
</span><span id="__span-14-12"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443:443</span>
</span><span id="__span-14-13"><span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-14-14"><span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
</span><span id="__span-14-15"><span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
</span><span id="__span-14-16"><span class="w">          </span><span class="c1"># Make the traefik service run only on the node with this label</span>
</span><span id="__span-14-17"><span class="w">          </span><span class="c1"># as the node with it has the volume for the certificates</span>
</span><span id="__span-14-18"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node.labels.traefik-public.traefik-public-certificates == true</span>
</span><span id="__span-14-19"><span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-14-20"><span class="w">        </span><span class="c1"># Enable Traefik for this service, to make it available in the public network</span>
</span><span id="__span-14-21"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.enable=true</span>
</span><span id="__span-14-22"><span class="w">        </span><span class="c1"># Use the traefik-public network (declared below)</span>
</span><span id="__span-14-23"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.docker.network=traefik-public</span>
</span><span id="__span-14-24"><span class="w">        </span><span class="c1"># Use the custom label &quot;traefik.constraint-label=traefik-public&quot;</span>
</span><span id="__span-14-25"><span class="w">        </span><span class="c1"># This public Traefik will only use services with this label</span>
</span><span id="__span-14-26"><span class="w">        </span><span class="c1"># That way you can add other internal Traefik instances per stack if needed</span>
</span><span id="__span-14-27"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.constraint-label=traefik-public</span>
</span><span id="__span-14-28"><span class="w">        </span><span class="c1"># admin-auth middleware with HTTP Basic auth</span>
</span><span id="__span-14-29"><span class="w">        </span><span class="c1"># Using the environment variables USERNAME and HASHED_PASSWORD</span>
</span><span id="__span-14-30"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.middlewares.admin-auth.basicauth.users=${USERNAME?Variable not set}:${HASHED_PASSWORD?Variable not set}</span>
</span><span id="__span-14-31"><span class="w">        </span><span class="c1"># https-redirect middleware to redirect HTTP to HTTPS</span>
</span><span id="__span-14-32"><span class="w">        </span><span class="c1"># It can be re-used by other stacks in other Docker Compose files</span>
</span><span id="__span-14-33"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.middlewares.https-redirect.redirectscheme.scheme=https</span>
</span><span id="__span-14-34"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.middlewares.https-redirect.redirectscheme.permanent=true</span>
</span><span id="__span-14-35"><span class="w">        </span><span class="c1"># traefik-http set up only to use the middleware to redirect to https</span>
</span><span id="__span-14-36"><span class="w">        </span><span class="c1"># Uses the environment variable DOMAIN</span>
</span><span id="__span-14-37"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-http.rule=Host(`${DOMAIN?Variable not set}`)</span>
</span><span id="__span-14-38"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-http.entrypoints=http</span>
</span><span id="__span-14-39"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-http.middlewares=https-redirect</span>
</span><span id="__span-14-40"><span class="w">        </span><span class="c1"># traefik-https the actual router using HTTPS</span>
</span><span id="__span-14-41"><span class="w">        </span><span class="c1"># Uses the environment variable DOMAIN</span>
</span><span id="__span-14-42"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.rule=Host(`${DOMAIN?Variable not set}`)</span>
</span><span id="__span-14-43"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.entrypoints=https</span>
</span><span id="__span-14-44"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.tls=true</span>
</span><span id="__span-14-45"><span class="w">        </span><span class="c1"># Use the special Traefik service api@internal with the web UI/Dashboard</span>
</span><span id="__span-14-46"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.service=api@internal</span>
</span><span id="__span-14-47"><span class="w">        </span><span class="c1"># Use the &quot;le&quot; (Let&#39;s Encrypt) resolver created below</span>
</span><span id="__span-14-48"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.tls.certresolver=le</span>
</span><span id="__span-14-49"><span class="w">        </span><span class="c1"># Enable HTTP Basic auth, using the middleware created above</span>
</span><span id="__span-14-50"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.middlewares=admin-auth</span>
</span><span id="__span-14-51"><span class="w">        </span><span class="c1"># Define the port inside of the Docker service to use</span>
</span><span id="__span-14-52"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.services.traefik-public.loadbalancer.server.port=8080</span>
</span><span id="__span-14-53"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-14-54"><span class="w">      </span><span class="c1"># Add Docker as a mounted volume, so that Traefik can read the labels of other services</span>
</span><span id="__span-14-55"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/var/run/docker.sock:ro</span>
</span><span id="__span-14-56"><span class="w">      </span><span class="c1"># Mount the volume to store the certificates</span>
</span><span id="__span-14-57"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik-public-certificates:/certificates</span>
</span><span id="__span-14-58"><span class="w">    </span><span class="nt">command</span><span class="p">:</span>
</span><span id="__span-14-59"><span class="w">      </span><span class="c1"># Enable Docker in Traefik, so that it reads labels from Docker services</span>
</span><span id="__span-14-60"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker</span>
</span><span id="__span-14-61"><span class="w">      </span><span class="c1"># Add a constraint to only use services with the label &quot;traefik.constraint-label=traefik-public&quot;</span>
</span><span id="__span-14-62"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker.constraints=Label(`traefik.constraint-label`, `traefik-public`)</span>
</span><span id="__span-14-63"><span class="w">      </span><span class="c1"># Do not expose all Docker services, only the ones explicitly exposed</span>
</span><span id="__span-14-64"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker.exposedbydefault=false</span>
</span><span id="__span-14-65"><span class="w">      </span><span class="c1"># Enable Docker Swarm mode</span>
</span><span id="__span-14-66"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker.swarmmode</span>
</span><span id="__span-14-67"><span class="w">      </span><span class="c1"># Create an entrypoint &quot;http&quot; listening on port 80</span>
</span><span id="__span-14-68"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--entrypoints.http.address=:80</span>
</span><span id="__span-14-69"><span class="w">      </span><span class="c1"># Create an entrypoint &quot;https&quot; listening on port 443</span>
</span><span id="__span-14-70"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--entrypoints.https.address=:443</span>
</span><span id="__span-14-71"><span class="w">      </span><span class="c1"># Create the certificate resolver &quot;le&quot; for Let&#39;s Encrypt, uses the environment variable EMAIL</span>
</span><span id="__span-14-72"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.le.acme.email=${EMAIL?Variable not set}</span>
</span><span id="__span-14-73"><span class="w">      </span><span class="c1"># Store the Let&#39;s Encrypt certificates in the mounted volume</span>
</span><span id="__span-14-74"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.le.acme.storage=/certificates/acme.json</span>
</span><span id="__span-14-75"><span class="w">      </span><span class="c1"># Use the TLS Challenge for Let&#39;s Encrypt</span>
</span><span id="__span-14-76"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.le.acme.tlschallenge=true</span>
</span><span id="__span-14-77"><span class="w">      </span><span class="c1"># Enable the access log, with HTTP requests</span>
</span><span id="__span-14-78"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--accesslog</span>
</span><span id="__span-14-79"><span class="w">      </span><span class="c1"># Enable the Traefik log, for configurations and errors</span>
</span><span id="__span-14-80"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--log</span>
</span><span id="__span-14-81"><span class="w">      </span><span class="c1"># Enable the Dashboard and API</span>
</span><span id="__span-14-82"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--api</span>
</span><span id="__span-14-83"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-14-84"><span class="w">      </span><span class="c1"># Use the public network created to be shared between Traefik and</span>
</span><span id="__span-14-85"><span class="w">      </span><span class="c1"># any other service that needs to be publicly available with HTTPS</span>
</span><span id="__span-14-86"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik-public</span>
</span><span id="__span-14-87">
</span><span id="__span-14-88"><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-14-89"><span class="w">  </span><span class="c1"># Create a volume to store the certificates, there is a constraint to make sure</span>
</span><span id="__span-14-90"><span class="w">  </span><span class="c1"># Traefik is always deployed to the same Docker node with the same volume containing</span>
</span><span id="__span-14-91"><span class="w">  </span><span class="c1"># the HTTPS certificates</span>
</span><span id="__span-14-92"><span class="w">  </span><span class="nt">traefik-public-certificates</span><span class="p">:</span>
</span><span id="__span-14-93">
</span><span id="__span-14-94"><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-14-95"><span class="w">  </span><span class="c1"># Use the previously created public network &quot;traefik-public&quot;, shared with other</span>
</span><span id="__span-14-96"><span class="w">  </span><span class="c1"># services that need to be publicly available via this Traefik</span>
</span><span id="__span-14-97"><span class="w">  </span><span class="nt">traefik-public</span><span class="p">:</span>
</span><span id="__span-14-98"><span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
<p>or for Traefik 3, where the only difference is how the swarm mode is activated:</p>
<details>
<summary>Traefik 3</summary>
<div class="highlight"><pre><span></span><code><span id="__span-15-1"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.3&#39;</span>
</span><span id="__span-15-2">
</span><span id="__span-15-3"><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-15-4">
</span><span id="__span-15-5"><span class="w">  </span><span class="nt">traefik</span><span class="p">:</span>
</span><span id="__span-15-6"><span class="w">    </span><span class="c1"># Use the latest v3.0.x Traefik image available</span>
</span><span id="__span-15-7"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik:v3.0</span>
</span><span id="__span-15-8"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-15-9"><span class="w">      </span><span class="c1"># Listen on port 80, default for HTTP, necessary to redirect to HTTPS</span>
</span><span id="__span-15-10"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80:80</span>
</span><span id="__span-15-11"><span class="w">      </span><span class="c1"># Listen on port 443, default for HTTPS</span>
</span><span id="__span-15-12"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443:443</span>
</span><span id="__span-15-13"><span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-15-14"><span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
</span><span id="__span-15-15"><span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
</span><span id="__span-15-16"><span class="w">          </span><span class="c1"># Make the traefik service run only on the node with this label</span>
</span><span id="__span-15-17"><span class="w">          </span><span class="c1"># as the node with it has the volume for the certificates</span>
</span><span id="__span-15-18"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node.labels.traefik-public.traefik-public-certificates == true</span>
</span><span id="__span-15-19"><span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-15-20"><span class="w">        </span><span class="c1"># Enable Traefik for this service, to make it available in the public network</span>
</span><span id="__span-15-21"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.enable=true</span>
</span><span id="__span-15-22"><span class="w">        </span><span class="c1"># Use the traefik-public network (declared below)</span>
</span><span id="__span-15-23"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.docker.network=traefik-public</span>
</span><span id="__span-15-24"><span class="w">        </span><span class="c1"># Use the custom label &quot;traefik.constraint-label=traefik-public&quot;</span>
</span><span id="__span-15-25"><span class="w">        </span><span class="c1"># This public Traefik will only use services with this label</span>
</span><span id="__span-15-26"><span class="w">        </span><span class="c1"># That way you can add other internal Traefik instances per stack if needed</span>
</span><span id="__span-15-27"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.constraint-label=traefik-public</span>
</span><span id="__span-15-28"><span class="w">        </span><span class="c1"># admin-auth middleware with HTTP Basic auth</span>
</span><span id="__span-15-29"><span class="w">        </span><span class="c1"># Using the environment variables USERNAME and HASHED_PASSWORD</span>
</span><span id="__span-15-30"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.middlewares.admin-auth.basicauth.users=${USERNAME?Variable not set}:${HASHED_PASSWORD?Variable not set}</span>
</span><span id="__span-15-31"><span class="w">        </span><span class="c1"># https-redirect middleware to redirect HTTP to HTTPS</span>
</span><span id="__span-15-32"><span class="w">        </span><span class="c1"># It can be re-used by other stacks in other Docker Compose files</span>
</span><span id="__span-15-33"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.middlewares.https-redirect.redirectscheme.scheme=https</span>
</span><span id="__span-15-34"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.middlewares.https-redirect.redirectscheme.permanent=true</span>
</span><span id="__span-15-35"><span class="w">        </span><span class="c1"># traefik-http set up only to use the middleware to redirect to https</span>
</span><span id="__span-15-36"><span class="w">        </span><span class="c1"># Uses the environment variable DOMAIN</span>
</span><span id="__span-15-37"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-http.rule=Host(`${DOMAIN?Variable not set}`)</span>
</span><span id="__span-15-38"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-http.entrypoints=http</span>
</span><span id="__span-15-39"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-http.middlewares=https-redirect</span>
</span><span id="__span-15-40"><span class="w">        </span><span class="c1"># traefik-https the actual router using HTTPS</span>
</span><span id="__span-15-41"><span class="w">        </span><span class="c1"># Uses the environment variable DOMAIN</span>
</span><span id="__span-15-42"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.rule=Host(`${DOMAIN?Variable not set}`)</span>
</span><span id="__span-15-43"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.entrypoints=https</span>
</span><span id="__span-15-44"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.tls=true</span>
</span><span id="__span-15-45"><span class="w">        </span><span class="c1"># Use the special Traefik service api@internal with the web UI/Dashboard</span>
</span><span id="__span-15-46"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.service=api@internal</span>
</span><span id="__span-15-47"><span class="w">        </span><span class="c1"># Use the &quot;le&quot; (Let&#39;s Encrypt) resolver created below</span>
</span><span id="__span-15-48"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.tls.certresolver=le</span>
</span><span id="__span-15-49"><span class="w">        </span><span class="c1"># Enable HTTP Basic auth, using the middleware created above</span>
</span><span id="__span-15-50"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.middlewares=admin-auth</span>
</span><span id="__span-15-51"><span class="w">        </span><span class="c1"># Define the port inside of the Docker service to use</span>
</span><span id="__span-15-52"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.services.traefik-public.loadbalancer.server.port=8080</span>
</span><span id="__span-15-53"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-15-54"><span class="w">      </span><span class="c1"># Add Docker as a mounted volume, so that Traefik can read the labels of other services</span>
</span><span id="__span-15-55"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/var/run/docker.sock:ro</span>
</span><span id="__span-15-56"><span class="w">      </span><span class="c1"># Mount the volume to store the certificates</span>
</span><span id="__span-15-57"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik-public-certificates:/certificates</span>
</span><span id="__span-15-58"><span class="w">    </span><span class="nt">command</span><span class="p">:</span>
</span><span id="__span-15-59"><span class="w">      </span><span class="c1"># Enable Docker in Traefik, so that it reads labels from Docker services</span>
</span><span id="__span-15-60"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker</span>
</span><span id="__span-15-61"><span class="w">      </span><span class="c1"># Add a constraint to only use services with the label &quot;traefik.constraint-label=traefik-public&quot;</span>
</span><span id="__span-15-62"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker.constraints=Label(`traefik.constraint-label`, `traefik-public`)</span>
</span><span id="__span-15-63"><span class="w">      </span><span class="c1"># Do not expose all Docker services, only the ones explicitly exposed</span>
</span><span id="__span-15-64"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker.exposedbydefault=false</span>
</span><span id="__span-15-65"><span class="w">      </span><span class="c1"># Enable Docker Swarm mode</span>
</span><span id="__span-15-66"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.swarm.endpoint=unix:///var/run/docker.sock</span>
</span><span id="__span-15-67"><span class="w">      </span><span class="c1"># Create an entrypoint &quot;http&quot; listening on port 80</span>
</span><span id="__span-15-68"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--entrypoints.http.address=:80</span>
</span><span id="__span-15-69"><span class="w">      </span><span class="c1"># Create an entrypoint &quot;https&quot; listening on port 443</span>
</span><span id="__span-15-70"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--entrypoints.https.address=:443</span>
</span><span id="__span-15-71"><span class="w">      </span><span class="c1"># Create the certificate resolver &quot;le&quot; for Let&#39;s Encrypt, uses the environment variable EMAIL</span>
</span><span id="__span-15-72"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.le.acme.email=${EMAIL?Variable not set}</span>
</span><span id="__span-15-73"><span class="w">      </span><span class="c1"># Store the Let&#39;s Encrypt certificates in the mounted volume</span>
</span><span id="__span-15-74"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.le.acme.storage=/certificates/acme.json</span>
</span><span id="__span-15-75"><span class="w">      </span><span class="c1"># Use the TLS Challenge for Let&#39;s Encrypt</span>
</span><span id="__span-15-76"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.le.acme.tlschallenge=true</span>
</span><span id="__span-15-77"><span class="w">      </span><span class="c1"># Enable the access log, with HTTP requests</span>
</span><span id="__span-15-78"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--accesslog</span>
</span><span id="__span-15-79"><span class="w">      </span><span class="c1"># Enable the Traefik log, for configurations and errors</span>
</span><span id="__span-15-80"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--log</span>
</span><span id="__span-15-81"><span class="w">      </span><span class="c1"># Enable the Dashboard and API</span>
</span><span id="__span-15-82"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--api</span>
</span><span id="__span-15-83"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-15-84"><span class="w">      </span><span class="c1"># Use the public network created to be shared between Traefik and</span>
</span><span id="__span-15-85"><span class="w">      </span><span class="c1"># any other service that needs to be publicly available with HTTPS</span>
</span><span id="__span-15-86"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik-public</span>
</span><span id="__span-15-87">
</span><span id="__span-15-88"><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-15-89"><span class="w">  </span><span class="c1"># Create a volume to store the certificates, there is a constraint to make sure</span>
</span><span id="__span-15-90"><span class="w">  </span><span class="c1"># Traefik is always deployed to the same Docker node with the same volume containing</span>
</span><span id="__span-15-91"><span class="w">  </span><span class="c1"># the HTTPS certificates</span>
</span><span id="__span-15-92"><span class="w">  </span><span class="nt">traefik-public-certificates</span><span class="p">:</span>
</span><span id="__span-15-93">
</span><span id="__span-15-94"><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-15-95"><span class="w">  </span><span class="c1"># Use the previously created public network &quot;traefik-public&quot;, shared with other</span>
</span><span id="__span-15-96"><span class="w">  </span><span class="c1"># services that need to be publicly available via this Traefik</span>
</span><span id="__span-15-97"><span class="w">  </span><span class="nt">traefik-public</span><span class="p">:</span>
</span><span id="__span-15-98"><span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Read the internal comments to learn what each configuration is for.</p>
<p>The file without comments is actually quite smaller, but the comments should give you an idea of what everything is doing.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This is just a standard Docker Compose file.</p>
<p>It's common to name the file <code>docker-compose.yml</code> or something like <code>docker-compose.traefik.yml</code>.</p>
<p>Here it's named just <code>traefik.yml</code> for brevity.</p>
</div>
<h2 id="deploy-it">Deploy it<a class="headerlink" href="#deploy-it" title="Permanent link">&para;</a></h2>
<p>Deploy the stack with:</p>
<div class="highlight"><pre><span></span><code><span id="__span-16-1">docker<span class="w"> </span>stack<span class="w"> </span>deploy<span class="w"> </span>-c<span class="w"> </span>traefik.yml<span class="w"> </span>traefik
</span></code></pre></div>
<p>It will use the environment variables you created above.</p>
<h2 id="check-it">Check it<a class="headerlink" href="#check-it" title="Permanent link">&para;</a></h2>
<ul>
<li>Check if the stack was deployed with:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-17-1">docker<span class="w"> </span>stack<span class="w"> </span>ps<span class="w"> </span>traefik
</span></code></pre></div>
<p>It will output something like:</p>
<div class="highlight"><pre><span></span><code><span id="__span-18-1">ID             NAME                IMAGE          NODE              DESIRED STATE   CURRENT STATE          ERROR   PORTS
</span><span id="__span-18-2">w5o6fmmln8ni   traefik_traefik.1   traefik:v2.2   dog.example.com   Running         Running 1 minute ago
</span></code></pre></div>
<ul>
<li>You can check the Traefik logs with:</li>
</ul>
<div class="highlight"><pre><span></span><code><span id="__span-19-1">docker<span class="w"> </span>service<span class="w"> </span>logs<span class="w"> </span>traefik_traefik
</span></code></pre></div>
<h2 id="check-the-user-interface">Check the user interface<a class="headerlink" href="#check-the-user-interface" title="Permanent link">&para;</a></h2>
<p>After some seconds/minutes, Traefik will acquire the HTTPS certificates for the web user interface (UI).</p>
<p>You will be able to securely access the web UI at <code>https://traefik.&lt;your domain&gt;</code> using the created username and password.</p>
<p>Once you deploy a stack, you will be able to see it there and see how the different hosts and paths map to different Docker services / containers.</p>
<h2 id="getting-the-client-ip">Getting the client IP<a class="headerlink" href="#getting-the-client-ip" title="Permanent link">&para;</a></h2>
<p>If you need to read the client IP in your applications/stacks using the <code>X-Forwarded-For</code> or <code>X-Real-IP</code> headers provided by Traefik, you need to make Traefik listen directly, not through Docker Swarm mode, even while being deployed with Docker Swarm mode.</p>
<p>For that, you need to publish the ports using "host" mode.</p>
<p>So, the Docker Compose lines:</p>
<div class="highlight"><pre><span></span><code><span id="__span-20-1"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-20-2"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80:80</span>
</span><span id="__span-20-3"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443:443</span>
</span></code></pre></div>
<p>need to be:</p>
<div class="highlight"><pre><span></span><code><span id="__span-21-1"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-21-2"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id="__span-21-3"><span class="w">        </span><span class="nt">published</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id="__span-21-4"><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
</span><span id="__span-21-5"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
</span><span id="__span-21-6"><span class="w">        </span><span class="nt">published</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
</span><span id="__span-21-7"><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
</span></code></pre></div>
<p>You can use all the same instructions above, downloading the host-mode file:</p>
<div class="highlight"><pre><span></span><code><span id="__span-22-1">curl<span class="w"> </span>-L<span class="w"> </span>dockerswarm.khulnasoft.com/traefik-host.yml<span class="w"> </span>-o<span class="w"> </span>traefik-host.yml
</span></code></pre></div>
<p>Or alternatively, copying it directly:</p>
<div class="highlight"><pre><span></span><code><span id="__span-23-1"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.3&#39;</span>
</span><span id="__span-23-2">
</span><span id="__span-23-3"><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-23-4">
</span><span id="__span-23-5"><span class="w">  </span><span class="nt">traefik</span><span class="p">:</span>
</span><span id="__span-23-6"><span class="w">    </span><span class="c1"># Use the latest Traefik image</span>
</span><span id="__span-23-7"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik:v2.2</span>
</span><span id="__span-23-8"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-23-9"><span class="w">      </span><span class="c1"># Listen on port 80, default for HTTP, necessary to redirect to HTTPS</span>
</span><span id="__span-23-10"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id="__span-23-11"><span class="w">        </span><span class="nt">published</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id="__span-23-12"><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
</span><span id="__span-23-13"><span class="w">      </span><span class="c1"># Listen on port 443, default for HTTPS</span>
</span><span id="__span-23-14"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
</span><span id="__span-23-15"><span class="w">        </span><span class="nt">published</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
</span><span id="__span-23-16"><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">host</span>
</span><span id="__span-23-17"><span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
</span><span id="__span-23-18"><span class="w">      </span><span class="nt">placement</span><span class="p">:</span>
</span><span id="__span-23-19"><span class="w">        </span><span class="nt">constraints</span><span class="p">:</span>
</span><span id="__span-23-20"><span class="w">          </span><span class="c1"># Make the traefik service run only on the node with this label</span>
</span><span id="__span-23-21"><span class="w">          </span><span class="c1"># as the node with it has the volume for the certificates</span>
</span><span id="__span-23-22"><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node.labels.traefik-public.traefik-public-certificates == true</span>
</span><span id="__span-23-23"><span class="w">      </span><span class="nt">labels</span><span class="p">:</span>
</span><span id="__span-23-24"><span class="w">        </span><span class="c1"># Enable Traefik for this service, to make it available in the public network</span>
</span><span id="__span-23-25"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.enable=true</span>
</span><span id="__span-23-26"><span class="w">        </span><span class="c1"># Use the traefik-public network (declared below)</span>
</span><span id="__span-23-27"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.docker.network=traefik-public</span>
</span><span id="__span-23-28"><span class="w">        </span><span class="c1"># Use the custom label &quot;traefik.constraint-label=traefik-public&quot;</span>
</span><span id="__span-23-29"><span class="w">        </span><span class="c1"># This public Traefik will only use services with this label</span>
</span><span id="__span-23-30"><span class="w">        </span><span class="c1"># That way you can add other internal Traefik instances per stack if needed</span>
</span><span id="__span-23-31"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.constraint-label=traefik-public</span>
</span><span id="__span-23-32"><span class="w">        </span><span class="c1"># admin-auth middleware with HTTP Basic auth</span>
</span><span id="__span-23-33"><span class="w">        </span><span class="c1"># Using the environment variables USERNAME and HASHED_PASSWORD</span>
</span><span id="__span-23-34"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.middlewares.admin-auth.basicauth.users=${USERNAME?Variable not set}:${HASHED_PASSWORD?Variable not set}</span>
</span><span id="__span-23-35"><span class="w">        </span><span class="c1"># https-redirect middleware to redirect HTTP to HTTPS</span>
</span><span id="__span-23-36"><span class="w">        </span><span class="c1"># It can be re-used by other stacks in other Docker Compose files</span>
</span><span id="__span-23-37"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.middlewares.https-redirect.redirectscheme.scheme=https</span>
</span><span id="__span-23-38"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.middlewares.https-redirect.redirectscheme.permanent=true</span>
</span><span id="__span-23-39"><span class="w">        </span><span class="c1"># traefik-http set up only to use the middleware to redirect to https</span>
</span><span id="__span-23-40"><span class="w">        </span><span class="c1"># Uses the environment variable DOMAIN</span>
</span><span id="__span-23-41"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-http.rule=Host(`${DOMAIN?Variable not set}`)</span>
</span><span id="__span-23-42"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-http.entrypoints=http</span>
</span><span id="__span-23-43"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-http.middlewares=https-redirect</span>
</span><span id="__span-23-44"><span class="w">        </span><span class="c1"># traefik-https the actual router using HTTPS</span>
</span><span id="__span-23-45"><span class="w">        </span><span class="c1"># Uses the environment variable DOMAIN</span>
</span><span id="__span-23-46"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.rule=Host(`${DOMAIN?Variable not set}`)</span>
</span><span id="__span-23-47"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.entrypoints=https</span>
</span><span id="__span-23-48"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.tls=true</span>
</span><span id="__span-23-49"><span class="w">        </span><span class="c1"># Use the special Traefik service api@internal with the web UI/Dashboard</span>
</span><span id="__span-23-50"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.service=api@internal</span>
</span><span id="__span-23-51"><span class="w">        </span><span class="c1"># Use the &quot;le&quot; (Let&#39;s Encrypt) resolver created below</span>
</span><span id="__span-23-52"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.tls.certresolver=le</span>
</span><span id="__span-23-53"><span class="w">        </span><span class="c1"># Enable HTTP Basic auth, using the middleware created above</span>
</span><span id="__span-23-54"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.routers.traefik-public-https.middlewares=admin-auth</span>
</span><span id="__span-23-55"><span class="w">        </span><span class="c1"># Define the port inside of the Docker service to use</span>
</span><span id="__span-23-56"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik.http.services.traefik-public.loadbalancer.server.port=8080</span>
</span><span id="__span-23-57"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-23-58"><span class="w">      </span><span class="c1"># Add Docker as a mounted volume, so that Traefik can read the labels of other services</span>
</span><span id="__span-23-59"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/run/docker.sock:/var/run/docker.sock:ro</span>
</span><span id="__span-23-60"><span class="w">      </span><span class="c1"># Mount the volume to store the certificates</span>
</span><span id="__span-23-61"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik-public-certificates:/certificates</span>
</span><span id="__span-23-62"><span class="w">    </span><span class="nt">command</span><span class="p">:</span>
</span><span id="__span-23-63"><span class="w">      </span><span class="c1"># Enable Docker in Traefik, so that it reads labels from Docker services</span>
</span><span id="__span-23-64"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker</span>
</span><span id="__span-23-65"><span class="w">      </span><span class="c1"># Add a constraint to only use services with the label &quot;traefik.constraint-label=traefik-public&quot;</span>
</span><span id="__span-23-66"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker.constraints=Label(`traefik.constraint-label`, `traefik-public`)</span>
</span><span id="__span-23-67"><span class="w">      </span><span class="c1"># Do not expose all Docker services, only the ones explicitly exposed</span>
</span><span id="__span-23-68"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker.exposedbydefault=false</span>
</span><span id="__span-23-69"><span class="w">      </span><span class="c1"># Enable Docker Swarm mode</span>
</span><span id="__span-23-70"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--providers.docker.swarmmode</span>
</span><span id="__span-23-71"><span class="w">      </span><span class="c1"># Create an entrypoint &quot;http&quot; listening on address 80</span>
</span><span id="__span-23-72"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--entrypoints.http.address=:80</span>
</span><span id="__span-23-73"><span class="w">      </span><span class="c1"># Create an entrypoint &quot;https&quot; listening on address 443</span>
</span><span id="__span-23-74"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--entrypoints.https.address=:443</span>
</span><span id="__span-23-75"><span class="w">      </span><span class="c1"># Create the certificate resolver &quot;le&quot; for Let&#39;s Encrypt, uses the environment variable EMAIL</span>
</span><span id="__span-23-76"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.le.acme.email=${EMAIL?Variable not set}</span>
</span><span id="__span-23-77"><span class="w">      </span><span class="c1"># Store the Let&#39;s Encrypt certificates in the mounted volume</span>
</span><span id="__span-23-78"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.le.acme.storage=/certificates/acme.json</span>
</span><span id="__span-23-79"><span class="w">      </span><span class="c1"># Use the TLS Challenge for Let&#39;s Encrypt</span>
</span><span id="__span-23-80"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--certificatesresolvers.le.acme.tlschallenge=true</span>
</span><span id="__span-23-81"><span class="w">      </span><span class="c1"># Enable the access log, with HTTP requests</span>
</span><span id="__span-23-82"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--accesslog</span>
</span><span id="__span-23-83"><span class="w">      </span><span class="c1"># Enable the Traefik log, for configurations and errors</span>
</span><span id="__span-23-84"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--log</span>
</span><span id="__span-23-85"><span class="w">      </span><span class="c1"># Enable the Dashboard and API</span>
</span><span id="__span-23-86"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--api</span>
</span><span id="__span-23-87"><span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-23-88"><span class="w">      </span><span class="c1"># Use the public network created to be shared between Traefik and</span>
</span><span id="__span-23-89"><span class="w">      </span><span class="c1"># any other service that needs to be publicly available with HTTPS</span>
</span><span id="__span-23-90"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">traefik-public</span>
</span><span id="__span-23-91">
</span><span id="__span-23-92"><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-23-93"><span class="w">  </span><span class="c1"># Create a volume to store the certificates, there is a constraint to make sure</span>
</span><span id="__span-23-94"><span class="w">  </span><span class="c1"># Traefik is always deployed to the same Docker node with the same volume containing</span>
</span><span id="__span-23-95"><span class="w">  </span><span class="c1"># the HTTPS certificates</span>
</span><span id="__span-23-96"><span class="w">  </span><span class="nt">traefik-public-certificates</span><span class="p">:</span>
</span><span id="__span-23-97">
</span><span id="__span-23-98"><span class="nt">networks</span><span class="p">:</span>
</span><span id="__span-23-99"><span class="w">  </span><span class="c1"># Use the previously created public network &quot;traefik-public&quot;, shared with other</span>
</span><span id="__span-23-100"><span class="w">  </span><span class="c1"># services that need to be publicly available via this Traefik</span>
</span><span id="__span-23-101"><span class="w">  </span><span class="nt">traefik-public</span><span class="p">:</span>
</span><span id="__span-23-102"><span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div>
<p>And then deploying with:</p>
<div class="highlight"><pre><span></span><code><span id="__span-24-1">docker<span class="w"> </span>stack<span class="w"> </span>deploy<span class="w"> </span>-c<span class="w"> </span>traefik-host.yml<span class="w"> </span>traefik
</span></code></pre></div>
<h2 id="distributed-lets-encrypt">Distributed Let's Encrypt<a class="headerlink" href="#distributed-lets-encrypt" title="Permanent link">&para;</a></h2>
<p>There was a guide in DockerSwarm.rocks for setting up Traefik with Consul to store the Let's Encrypt certificates in a distributed way.</p>
<p>Nevertheless, that technique was fragile and error prone. Because of that, the Traefik team disabled that functionality in Traefik version 2.</p>
<p>In many cases the technique described here should be enough. But if you have a big and complex system that requires a distributed Let's Encrypt store for Traefik, you should check <a href="https://containo.us/traefikee/" class="external-link" target="_blank">Traefik Enterprise Edition</a> that supports it.</p>
<h2 id="whats-next">What's next<a class="headerlink" href="#whats-next" title="Permanent link">&para;</a></h2>
<p>The next thing would be to deploy a stack (a complete web application, with backend, frontend, database, etc) using this Docker Swarm mode cluster.</p>
<p>It's actually very simple, as you can use Docker Compose for local development and then use the same files for deployment in the Docker Swarm mode cluster.</p>
<p>If you want to try it right now, you can check this project generator with a ReadyAPI backend and a frontend using Vue.js <a href="https://github.com/khulnasoft/full-stack-readyapi-postgresql" class="external-link" target="_blank">https://github.com/khulnasoft/full-stack-readyapi-postgresql</a>.</p>







  
  



  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../swarm-or-kubernetes/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Docker Swarm Mode or Kubernetes">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Docker Swarm Mode or Kubernetes
              </div>
            </div>
          </a>
        
        
          
          <a href="../swarmpit/" class="md-footer__link md-footer__link--next" aria-label="Next: Swarmpit web user interface for your Docker Swarm cluster">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Swarmpit web user interface for your Docker Swarm cluster
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/khulnasoft/dockerswarm" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/khulnasoft" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/khulnasoft" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://dev.to/khulnasoft" target="_blank" rel="noopener" title="dev.to" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35s5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06M404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8M154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://medium.com/@khulnasoft" target="_blank" rel="noopener" title="medium.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262m288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://khulnasoft.com" target="_blank" rel="noopener" title="khulnasoft.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.4c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.3c2.2 20.4 3.3 41.8 3.3 64m28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64m112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7m-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6M8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64m186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.7z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "content.code.copy", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.525ec568.min.js"></script>
      
        <script src="../js/termynal.js"></script>
      
        <script src="../js/custom.js"></script>
      
    
  </body>
</html>